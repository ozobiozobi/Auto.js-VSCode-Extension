import{H as a}from"./Header-WQbM4sA5.js";import{C as i,F as c}from"./Card-5eaP5XeC.js";import{B as p}from"./Button--kJKo-mJ.js";import{_ as u,c as h,e as n,b as e,f as t,a as f,t as m,d,s as g}from"./index-ByinR5q9.js";/* empty css                                                               */const P={class:"container"},I={class:"script-container"},N={class:"script-actions"},s=`function collectNodeInfo(node){if(!node)return null;let nodeInfo={text:node.text(),id:node.id(),desc:node.desc(),clz:node.className(),pkg:node.packageName(),bounds:node.bounds(),index:node.indexInParent(),depth:node.depth(),clickable:node.clickable(),longClickable:node.longClickable(),checkable:node.checkable(),checked:node.checked(),selected:node.selected(),enabled:node.enabled(),visibleToUser:node.visibleToUser(),row:node.row(),column:node.column(),rowSpan:node.rowSpan(),columnSpan:node.columnSpan(),rowCount:node.rowCount(),columnCount:node.columnCount(),drawingOrder:node.drawingOrder(),children:[]};let children=node.children();if(children&&children.length>0){for(let i=0;i<children.length;i++){let childInfo=collectNodeInfo(children[i]);if(childInfo){nodeInfo.children.push(childInfo)}}}return nodeInfo}function saveNodeTree(){let rootNode=auto.root;let nodeTree=collectNodeInfo(rootNode);if(!nodeTree){return}let timestamp=new Date().getTime();let jsonPath="/sdcard/nodeInfo_"+timestamp+".json";let imgPath="/sdcard/nodeScreen_"+timestamp+".png";try{files.write(jsonPath,JSON.stringify(nodeTree,null,2));captureScreen(imgPath);uploadFilesToAPI(imgPath,jsonPath)}catch(e){}}function uploadFilesToAPI(screenshotPath,jsonPath){try{let res=http.postMultipart(API_ENDPOINT,{screenshot:open(screenshotPath),nodeJson:open(jsonPath),});if(res.statusCode>=200&&res.statusCode<300){log("上传成功")}}catch(e){}}

if (!requestScreenCapture()) {
    exit();
}
const API_ENDPOINT = "http://172.20.33.2:8000/api/screenshots/upload";
saveNodeTree();`,S={__name:"ScriptPage",setup(b){function r(){navigator.clipboard.writeText(s).then(()=>{g("脚本已复制到剪贴板")}).catch(l=>{console.error("复制失败:",l)})}return(l,o)=>(f(),h("div",P,[n(a),o[6]||(o[6]=e("div",{class:"page-header"},[e("div",{class:"header-title"},[e("h1",null,"脚本"),e("p",{class:"header-description"},"可以运行的AutoJS脚本")])],-1)),e("div",I,[n(i,null,{header:t(()=>[o[1]||(o[1]=e("h5",null,[e("span",{class:"card-icon"},"📜"),d(" 节点收集脚本")],-1)),e("div",N,[n(p,{onClick:r,type:"primary",small:""},{default:t(()=>o[0]||(o[0]=[d("复制脚本")])),_:1})])]),default:t(()=>[e("div",{class:"markdown-content"},[o[2]||(o[2]=e("h3",null,"节点信息收集脚本",-1)),o[3]||(o[3]=e("p",null,"此脚本用于收集Android应用节点信息并上传，配合GoScoper使用。",-1)),e("pre",null,[e("code",{class:"language-javascript"},m(s))]),o[4]||(o[4]=e("h3",null,"使用说明",-1)),o[5]||(o[5]=e("ol",null,[e("li",null,"在 AutoJS 应用中创建新脚本"),e("li",null,"复制并粘贴上面的代码"),e("li",null,"根据需要修改 API_ENDPOINT 为您的服务器地址"),e("li",null,"运行脚本以捕获当前屏幕的节点树信息并上传")],-1))])]),_:1})]),n(c)]))}},_=u(S,[["__scopeId","data-v-d846c41b"]]);export{_ as default};
