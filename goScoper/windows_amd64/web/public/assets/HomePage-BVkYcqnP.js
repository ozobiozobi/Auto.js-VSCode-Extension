import{_ as $,r as d,o as b,c as r,a as l,b as e,t as f,d as a,u as w,w as S,s as C,e as c,f as h,g as x,F as B,h as D,i as I,j as H}from"./index-ByinR5q9.js";import{H as N}from"./Header-WQbM4sA5.js";import{C as A,F}from"./Card-5eaP5XeC.js";import{B as k}from"./Button--kJKo-mJ.js";import{g as V,f as P,d as T,a as U,b as j}from"./api-Cad0ROAR.js";/* empty css                                                               */const M={class:"thumbnail-cell"},q={class:"item-thumbnail"},E=["src"],L={class:"info-cell"},O={class:"item-title"},R={class:"item-time"},W={class:"item-resolution"},z={class:"node-count-cell"},G={class:"node-count"},J={class:"action-cell"},K={__name:"ScreenshotItem",props:{screenshot:{type:Object,required:!0}},emits:["click","deleted"],setup(v,{emit:p}){const o=v,i=p,u=d("åŠ è½½ä¸­..."),_=d(""),m=d("...");b(async()=>{const s=new Image;s.onload=function(){u.value=`${this.naturalWidth} Ã— ${this.naturalHeight}`};const t=`/api/uploads/${o.screenshot.filename}`;s.src=t,_.value=t;try{const n=await V(o.screenshot.id);m.value=n.nodes?n.nodes.length:0}catch(n){console.error("èŽ·å–èŠ‚ç‚¹æ•°é‡å¤±è´¥",n),m.value="?"}});function y(){confirm(`ç¡®å®šè¦åˆ é™¤æˆªå›¾ #${o.screenshot.id} å—ï¼Ÿ`)&&g()}async function g(){try{await T(o.screenshot.id),C("æˆªå›¾åˆ é™¤æˆåŠŸ"),i("deleted",o.screenshot.id)}catch(s){console.error("åˆ é™¤æˆªå›¾å¤±è´¥",s)}}return(s,t)=>(l(),r("tr",{class:"screenshot-item",onClick:t[0]||(t[0]=n=>s.$emit("click"))},[e("td",M,[e("div",q,[e("img",{src:_.value,alt:"æˆªå›¾ç¼©ç•¥å›¾",class:"thumbnail-image"},null,8,E)])]),e("td",L,[e("div",O,"æˆªå›¾ #"+f(v.screenshot.id),1),e("div",R,[t[1]||(t[1]=e("span",{class:"info-label"},"ä¸Šä¼ æ—¶é—´ï¼š",-1)),a(f(w(P)(v.screenshot.upload_time)),1)]),e("div",W,[t[2]||(t[2]=e("span",{class:"info-label"},"åˆ†è¾¨çŽ‡ï¼š",-1)),a(f(u.value),1)])]),e("td",z,[e("div",G,f(m.value),1)]),e("td",J,[e("button",{class:"delete-button",onClick:S(y,["stop"])}," åˆ é™¤ ")])]))}},Q=$(K,[["__scopeId","data-v-a2e169fa"]]),X={class:"container"},Y={class:"page-header"},Z={class:"screenshot-container"},ee={key:0,class:"screenshots-count"},te={key:0,class:"loading-item"},se={key:1,class:"empty-item"},oe={class:"empty-content"},ne={key:2,class:"screenshot-table"},le={__name:"HomePage",setup(v){const p=x(),o=d([]),i=d(!0);d(!1),b(async()=>{try{const s=await U();o.value=s.screenshots||[]}catch(s){console.error("åŠ è½½æˆªå›¾åˆ—è¡¨å¤±è´¥",s)}finally{i.value=!1}});function u(){p.push("/upload")}function _(s){p.push(`/detail/${s}`)}function m(){confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æˆªå›¾å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼")&&y()}async function y(){try{i.value=!0,await j(),o.value=[],C("æ‰€æœ‰æˆªå›¾å·²æ¸…ç©º")}catch(s){console.error("æ¸…ç©ºæˆªå›¾å¤±è´¥",s)}finally{i.value=!1}}function g(s){o.value=o.value.filter(t=>t.id!==s)}return(s,t)=>(l(),r("div",X,[c(N),e("div",Y,[t[1]||(t[1]=e("div",{class:"header-title"},[e("h1",null,"Androidæˆªå›¾åˆ—è¡¨"),e("p",{class:"header-description"},"æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰ä¸Šä¼ çš„Android UIæˆªå›¾åŠèŠ‚ç‚¹")],-1)),c(k,{onClick:u,icon:"ðŸ“¤"},{default:h(()=>t[0]||(t[0]=[a("ä¸Šä¼ æ–°æˆªå›¾")])),_:1})]),e("div",Z,[c(A,null,{header:h(()=>[t[3]||(t[3]=e("h5",null,[e("span",{class:"card-icon"},"ðŸ“‹"),a(" æ‰€æœ‰æˆªå›¾")],-1)),!i.value&&o.value.length>0?(l(),r("div",ee,[a(f(o.value.length)+" ä¸ªæˆªå›¾ ",1),c(k,{onClick:m,type:"danger",small:""},{default:h(()=>t[2]||(t[2]=[a("æ¸…ç©ºæ‰€æœ‰æˆªå›¾")])),_:1})])):H("",!0)]),default:h(()=>[i.value?(l(),r("div",te,t[4]||(t[4]=[e("span",{class:"spinner"},null,-1),a(" åŠ è½½ä¸­... ")]))):o.value.length===0?(l(),r("div",se,[e("div",oe,[t[6]||(t[6]=e("div",{class:"empty-icon"},"ðŸ“±",-1)),t[7]||(t[7]=e("div",{class:"empty-text"},"æš‚æ— æˆªå›¾",-1)),c(k,{onClick:u,type:"primary",small:""},{default:h(()=>t[5]||(t[5]=[a("ä¸Šä¼ ç¬¬ä¸€å¼ æˆªå›¾")])),_:1})])])):(l(),r("table",ne,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",null,"ç¼©ç•¥å›¾"),e("th",null,"æˆªå›¾ä¿¡æ¯"),e("th",null,"èŠ‚ç‚¹æ•°é‡"),e("th",null,"æ“ä½œ")])],-1)),e("tbody",null,[(l(!0),r(B,null,D(o.value,n=>(l(),I(Q,{key:n.id,screenshot:n,onClick:ae=>_(n.id),onDeleted:g},null,8,["screenshot","onClick"]))),128))])]))]),_:1})]),c(F)]))}},he=$(le,[["__scopeId","data-v-b273c31f"]]);export{he as default};
