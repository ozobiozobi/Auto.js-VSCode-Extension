import{_ as le,r as y,m as H,n as W,p as Ne,c as r,a as d,b as l,j as w,w as ke,t as S,q as we,F as ce,h as ue,i as he,d as E,e as ve,x as R,o as Se,g as Ae,l as O,y as Ce,z as Te,s as ne}from"./index-ByinR5q9.js";import{H as Ie}from"./Header-WQbM4sA5.js";/* empty css                                                               */import{c as re,e as Oe,g as Xe,h as se}from"./api-Cad0ROAR.js";const De=["data-node-id"],Ee={class:"toggle-icon"},He={class:"tree-node-label"},je={class:"node-class"},Je={key:0,class:"node-text"},Ye={key:0,class:"tree-node-children"},Ve={__name:"NodeTreeItem",props:{node:{type:Object,required:!0},selectedNode:{type:Object,default:null},expanded:{type:Boolean,default:!0},highlightId:{type:String,default:null}},emits:["node-selected"],setup(X,{expose:j,emit:V}){const g=X,u=V,c=y(g.expanded),T=y([]),A=y(null),M=H(()=>c.value),C=H(()=>g.node.children&&g.node.children.length>0&&a.value.length>0),a=H(()=>!g.node.children||!Array.isArray(g.node.children)?[]:g.node.children.filter(b=>b.visibleToUser!==!1)),p=H(()=>{const m=(g.node.class||g.node.clz||"æœªçŸ¥").split(".");return m[m.length-1]}),x=H(()=>g.node.text?`"${g.node.text}"`:""),$=H(()=>B(g.node)),k=H(()=>g.selectedNode===g.node),J=H(()=>g.highlightId===$.value);function D(b){c.value=!c.value,b.stopPropagation()}function P(){u("node-selected",g.node)}function h(b){u("node-selected",b)}function Z(b){if($.value===b)return!0;if(C.value){c.value=!0;for(let m=0;m<T.value.length;m++){const _=T.value[m];if(_&&_.expandToNode&&_.expandToNode(b))return!0}}return!1}function B(b){let m=[];if(b.id){let _=b.id;typeof _=="object"&&_!==null&&(_=JSON.stringify(_)),m.push(`id-${_}`)}if(b.text){const _=b.text.substring(0,10);m.push(`text-${_}`)}if(m.push(`index-${b.index||0}`),b.depth!==void 0&&m.push(`depth-${b.depth}`),b.bounds){const{left:_,top:F,right:L,bottom:G}=b.bounds,z=`${_}_${F}_${L}_${G}`;m.push(`bounds-${z}`)}return m.length===0&&m.push(`unknown-${Date.now()}`),`node-${m.join("-")}`}return j({expandToNode:Z}),W(()=>g.highlightId,b=>{b===$.value&&(c.value=!0)}),(b,m)=>{const _=Ne("node-tree-item",!0);return d(),r("li",{class:"tree-node","data-node-id":$.value,ref_key:"nodeEl",ref:A},[l("div",{class:we(["tree-node-content",{selected:k.value,highlighted:J.value}]),onClick:P},[C.value?(d(),r("div",{key:0,class:"node-toggle",onClick:ke(D,["stop"])},[l("span",Ee,S(M.value?"â–¼":"â–º"),1)])):w("",!0),l("div",He,[l("span",je,S(p.value),1),x.value?(d(),r("span",Je,S(x.value),1)):w("",!0)])],2),C.value&&M.value?(d(),r("ul",Ye,[(d(!0),r(ce,null,ue(a.value,(F,L)=>(d(),he(_,{key:L,node:F,"selected-node":X.selectedNode,onNodeSelected:h,"highlight-id":X.highlightId,expanded:!0,ref_for:!0,ref_key:"childNodes",ref:T},null,8,["node","selected-node","highlight-id"]))),128))])):w("",!0)],8,De)}}},Me=le(Ve,[["__scopeId","data-v-ed7d294f"]]),Pe={class:"node-tree-container"},Re={class:"card-body"},Be={key:0,class:"loading-placeholder"},Fe={key:0,class:"no-visible-nodes"},Le={key:1,class:"tree"},ze={__name:"NodeTree",props:{nodeData:{type:Object,required:!0},selectedNode:{type:Object,default:null},autoScroll:{type:Boolean,default:!1}},emits:["node-selected"],setup(X,{emit:j}){const V=X,g=j,u=y(null),c=y(null),T=y(null);function A(a){g("node-selected",a)}W(()=>V.selectedNode,async a=>{var p;if(a)if(T.value=C(a),await R(),V.autoScroll){const x=(p=u.value)==null?void 0:p.querySelector(`[data-node-id="${T.value}"]`);x&&(M(),x.scrollIntoView({behavior:"smooth",block:"center"}))}else c.value&&c.value.expandToNode(T.value)},{immediate:!0});function M(a){c.value&&c.value.expandToNode(T.value)}function C(a){let p=[];if(a.id){let x=a.id;typeof x=="object"&&x!==null&&(x=JSON.stringify(x)),p.push(`id-${x}`)}if(a.text){const x=a.text.substring(0,10);p.push(`text-${x}`)}if(p.push(`index-${a.index||0}`),a.depth!==void 0&&p.push(`depth-${a.depth}`),a.bounds){const{left:x,top:$,right:k,bottom:J}=a.bounds,D=`${x}_${$}_${k}_${J}`;p.push(`bounds-${D}`)}return p.length===0&&p.push(`unknown-${Date.now()}`),`node-${p.join("-")}`}return(a,p)=>(d(),r("div",Pe,[p[1]||(p[1]=l("div",{class:"card-header"},[l("span",null,"èŠ‚ç‚¹æ ‘")],-1)),l("div",Re,[X.nodeData?(d(),r("div",{key:1,class:"node-tree-view",ref_key:"treeView",ref:u},[X.nodeData.visibleToUser===!1?(d(),r("div",Fe," æ ¹èŠ‚ç‚¹ä¸å¯è§ã€‚ ")):(d(),r("ul",Le,[ve(Me,{node:X.nodeData,"selected-node":X.selectedNode,onNodeSelected:A,expanded:!0,"highlight-id":T.value,ref_key:"rootNodeItem",ref:c},null,8,["node","selected-node","highlight-id"])]))],512)):(d(),r("div",Be,p[0]||(p[0]=[l("span",{class:"spinner"},null,-1),E(" åŠ è½½ä¸­... ")])))])]))}},qe=le(ze,[["__scopeId","data-v-9af86bc6"]]),We={class:"container"},Ge={class:"main-container"},Ue={class:"detail-content-row"},Ke={class:"screenshot-column"},Qe={class:"card"},Ze={class:"card-header"},et={key:0,class:"resolution-info"},tt={class:"card-body"},ot={class:"screenshot-wrapper"},nt=["src"],st={key:0,class:"loading-placeholder"},lt={class:"info-column"},it={class:"card"},at={class:"card-body"},dt={key:0,class:"loading-placeholder"},rt={key:1,class:"node-instructions"},ct={key:2,class:"node-properties-container"},ut={class:"autoxjs-code-section"},ht={key:0,class:"code-display"},vt={key:1,class:"code-placeholder"},ft={class:"node-properties"},gt={key:0},pt={class:"node-properties-table"},bt={class:"property-key"},yt={class:"property-value"},mt={class:"property-value-content"},$t=["onClick"],xt={class:"node-json-section"},_t={class:"json-display"},Nt={class:"tree-column"},kt={class:"card node-tree-card"},wt={key:0,class:"hover-info-item"},St={key:1,class:"hover-info-item"},At={key:2,class:"hover-info-item"},Ct={key:3,class:"hover-info-item"},Tt={key:4,class:"hover-info-item"},It={__name:"DetailPage",props:{id:{type:String,required:!0}},setup(X){const j=X,V=Ae(),g=y(""),u=y(null),c=y(null),T=y(!1),A=y(!1),M=y(null),C=y(null),a=y(null),p=y(new Map),x=y(!0),$=y(1),k=y(1),J=y(null),D=y(""),P=y(""),h=y({show:!1,x:0,y:0,pageX:0,pageY:0,originalX:0,originalY:0,className:"",text:"",desc:"",index:void 0}),Z=H(()=>{if(!c.value)return{};const e={},t=c.value,s=t.clz||t.class||"";"id"in t&&(e.id=t.id),e.className=s;for(const n in t)n==="id"||n==="clz"||n==="class"||n==="children"||n==="bounds"||(e[n]=t[n]);if(t.bounds){const{left:n,top:o,right:i,bottom:v}=t.bounds;e.åæ ‡={display:`å·¦: ${n} ä¸Š: ${o} å³: ${i} ä¸‹: ${v}`,value:`${n},${o},${i},${v}`,toString(){return this.display}};const{x:N,y:I}=re(t);e.ä¸­å¿ƒç‚¹={display:`X: ${N} Y: ${I}`,value:`${N},${I}`,toString(){return this.display}}}return e}),B=H(()=>{if(!c.value)return"";const e={...c.value};return delete e.children,JSON.stringify(e,null,2)});Se(async()=>{if(!j.id){V.push("/");return}window.addEventListener("resize",_);try{console.log("å¼€å§‹åŠ è½½æˆªå›¾è¯¦æƒ…ï¼ŒID:",j.id);const e=await Oe(j.id);if(console.log("è·å–åˆ°æˆªå›¾æ•°æ®:",e?"æˆåŠŸ":"å¤±è´¥"),e&&e.screenshot)g.value=`/api/uploads/${e.screenshot.filename}`,console.log("è®¾ç½®æˆªå›¾URL:",g.value);else{O("è·å–æˆªå›¾ä¿¡æ¯å¤±è´¥"),console.error("æˆªå›¾æ•°æ®ä¸­æ²¡æœ‰screenshotå­—æ®µ",e);return}try{console.log("å¼€å§‹è·å–èŠ‚ç‚¹æ•°æ®");const t=await Xe(j.id);console.log("èŠ‚ç‚¹æ•°æ®å“åº”:",t?JSON.stringify(t).substring(0,100)+"...":"æ— æ•°æ®"),t&&t.node_data?(console.log("æˆåŠŸè·å–èŠ‚ç‚¹æ•°æ®ï¼Œç»“æ„:",Object.keys(t.node_data).join(",")),u.value=t.node_data,z(u.value),await R(),setTimeout(()=>{console.log("DOMæ›´æ–°åå¼€å§‹å°è¯•æ¸²æŸ“èŠ‚ç‚¹"),A.value&&Y()},200)):e.node_data?(console.log("ä»æˆªå›¾è¯¦æƒ…ä¸­è·å–èŠ‚ç‚¹æ•°æ®"),u.value=e.node_data,z(u.value),await R(),setTimeout(()=>{console.log("DOMæ›´æ–°åå¼€å§‹å°è¯•æ¸²æŸ“èŠ‚ç‚¹"),A.value&&Y()},200)):(console.error("èŠ‚ç‚¹æ•°æ®ä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®",t),O("æœªèƒ½è·å–èŠ‚ç‚¹æ•°æ®ï¼ŒæœåŠ¡å™¨è¿”å›çš„æ•°æ®æ ¼å¼ä¸æ­£ç¡®"))}catch(t){console.error("è·å–èŠ‚ç‚¹æ•°æ®å‡ºé”™:",t),e.node_data?(console.log("åœ¨èŠ‚ç‚¹APIå¤±è´¥åä»æˆªå›¾è¯¦æƒ…è·å–èŠ‚ç‚¹æ•°æ®"),u.value=e.node_data,z(u.value),await R(),setTimeout(()=>{console.log("DOMæ›´æ–°åå¼€å§‹å°è¯•æ¸²æŸ“èŠ‚ç‚¹"),A.value&&Y()},200)):O("è·å–èŠ‚ç‚¹æ•°æ®å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥")}u.value||(console.error("èŠ‚ç‚¹æ•°æ®ä¸ºç©º"),O("æœªèƒ½è·å–èŠ‚ç‚¹æ•°æ®ï¼Œè¯·æ£€æŸ¥ä¸Šä¼ çš„JSONæ˜¯å¦æœ‰æ•ˆ"))}catch(e){console.error("è·å–è¯¦æƒ…å‡ºé”™:",e),O("åŠ è½½é¡µé¢æ•°æ®å¤±è´¥")}}),Ce(()=>{window.removeEventListener("resize",_),clearTimeout(J.value)}),W(u,()=>{u.value&&A.value&&R(()=>{Y()})}),W(A,()=>{u.value&&A.value&&setTimeout(()=>{console.log("ç›‘å¬åˆ°æˆªå›¾å·²åŠ è½½ï¼Œå‡†å¤‡æ¸²æŸ“èŠ‚ç‚¹"),Y()},500)}),W(c,e=>{u.value&&A.value&&R(()=>{U(c.value)}),e?pe():D.value=""});function b(e){if(A.value=!0,console.log("æˆªå›¾åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–SVGå®¹å™¨"),C.value){const i=C.value.naturalWidth,v=C.value.naturalHeight;P.value=`${i} Ã— ${v}`,console.log(`å›¾ç‰‡åˆ†è¾¨ç‡: ${P.value}`)}let t=0;const s=3,n=[300,500,1e3];function o(){setTimeout(()=>{console.log(`å°è¯•åˆå§‹åŒ–SVGå®¹å™¨ (ç¬¬${t+1}æ¬¡)`),m()&&t<s-1&&(t++,console.log(`åˆå§‹åŒ–æœªæˆåŠŸï¼Œå°†åœ¨${n[t]}msåé‡è¯•`),o())},n[t])}o()}function m(){if(!C.value||!a.value)return console.warn("å›¾ç‰‡æˆ–SVGå®¹å™¨æœªå‡†å¤‡å¥½"),!0;const e=C.value;if(!e.complete)return console.warn("å›¾ç‰‡å°šæœªå®Œå…¨åŠ è½½"),!0;const t=e.getBoundingClientRect(),s=t.width,n=t.height,o=e.naturalWidth,i=e.naturalHeight;if(o<=0||i<=0)return console.warn(`å›¾ç‰‡åŸå§‹å°ºå¯¸æ— æ•ˆ: ${o}x${i}`),!0;if(s<=0||n<=0)return console.warn(`å›¾ç‰‡æ˜¾ç¤ºå°ºå¯¸æ— æ•ˆ: ${s}x${n}`),!0;if($.value=s/o,k.value=n/i,$.value<=.01||k.value<=.01||$.value>10||k.value>10)return console.warn(`ç¼©æ”¾å› å­ä¸åˆç†: X=${$.value.toFixed(3)}, Y=${k.value.toFixed(3)}`),!0;console.log(`æ›´æ–°å›¾ç‰‡ç¼©æ”¾æ¯”ä¾‹: X=${$.value.toFixed(3)}, Y=${k.value.toFixed(3)}`),console.log(`å›¾ç‰‡æ˜¾ç¤ºå°ºå¯¸: ${s}x${n}, åŸå§‹å°ºå¯¸: ${o}x${i}`);const v=e.offsetLeft,N=e.offsetTop;return a.value.setAttribute("width",s),a.value.setAttribute("height",n),a.value.style.position="absolute",a.value.style.top=`${N}px`,a.value.style.left=`${v}px`,Y(),!1}function _(){C.value&&(clearTimeout(J.value),J.value=setTimeout(()=>{console.log("çª—å£å¤§å°å˜åŒ–ï¼Œé‡æ–°åˆå§‹åŒ–SVGå®¹å™¨"),m()},300))}function F(e){const t=a.value.getBoundingClientRect(),s=e.clientX-t.left,n=e.clientY-t.top;console.log(`ç‚¹å‡»åæ ‡: (${s}, ${n})`);const o=L(s,n);o?(console.log("æ‰¾åˆ°èŠ‚ç‚¹:",o.text||"æ— æ–‡æœ¬èŠ‚ç‚¹"),T.value=!0,c.value=o,U(o)):console.log("ç‚¹å‡»ä½ç½®æ²¡æœ‰æ‰¾åˆ°èŠ‚ç‚¹")}function L(e,t){const s=a.value.querySelectorAll("rect"),n=[];return s.forEach(o=>{const i=parseFloat(o.getAttribute("x")),v=parseFloat(o.getAttribute("y")),N=parseFloat(o.getAttribute("width")),I=parseFloat(o.getAttribute("height"));if(e>=i&&e<=i+N&&t>=v&&t<=v+I){const K=o.getAttribute("data-node-id"),Q=p.value.get(K);if(Q){const ee=N*I;n.push({node:Q,area:ee})}}}),n.length===0?null:(n.sort((o,i)=>o.area-i.area),n[0].node)}function G(e,t){let s=[];if(e.id&&s.push(`id-${e.id}`),e.text){const n=e.text.substring(0,10);s.push(`text-${n}`)}if(s.push(`index-${e.index||t}`),e.depth!==void 0&&s.push(`depth-${e.depth}`),e.bounds){const{left:n,top:o,right:i,bottom:v}=e.bounds,N=`${n}_${o}_${i}_${v}`;s.push(`bounds-${N}`)}return s.length===0&&s.push(`unknown-${Date.now()}-${t}`),`node-${s.join("-")}`}function z(e){if(!e)return console.error("èŠ‚ç‚¹æ•°æ®ä¸ºnullæˆ–undefined"),!1;if(console.log("éªŒè¯èŠ‚ç‚¹æ•°æ®:",typeof e,e.bounds?"æœ‰boundså­—æ®µ":"æ— boundså­—æ®µ"),e.bounds||console.warn("èŠ‚ç‚¹æ•°æ®ç¼ºå°‘boundså­—æ®µ"),e.children&&Array.isArray(e.children)){if(console.log(`æ ¹èŠ‚ç‚¹æœ‰${e.children.length}ä¸ªå­èŠ‚ç‚¹`),e.children.length>0){const t=e.children[0];console.log("é¦–ä¸ªå­èŠ‚ç‚¹:",t.text||"æ— æ–‡æœ¬",t.bounds?"æœ‰bounds":"æ— bounds")}}else console.warn("èŠ‚ç‚¹æ•°æ®æ²¡æœ‰childrenæ•°ç»„æˆ–ä¸æ˜¯æ•°ç»„");return!0}function Y(){if(!document.getElementById("nodeHighlights")){console.warn("SVGå®¹å™¨å…ƒç´ ä¸å­˜åœ¨ï¼Œç­‰å¾…DOMæ›´æ–°..."),setTimeout(()=>{u.value&&A.value&&Y()},300);return}if(!a.value||!u.value){console.error("æ¸²æŸ“èŠ‚ç‚¹å¤±è´¥ï¼š",a.value?"":"SVGå®¹å™¨ä¸å­˜åœ¨",u.value?"":"èŠ‚ç‚¹æ•°æ®ä¸å­˜åœ¨");return}console.log("å¼€å§‹æ¸²æŸ“èŠ‚ç‚¹è¾¹ç•Œ");try{let s=function(o,i=0,v=0){!o||!o.bounds||(o.visibleToUser!==!1&&t.push({node:o,depth:i,index:v}),o.children&&Array.isArray(o.children)&&o.children.length>0&&o.children.forEach((N,I)=>{s(N,i+1,I)}))},n=function(o){const i=o.node,v=o.depth,N=o.index,{left:I,top:K,right:Q,bottom:ee}=i.bounds,ie=I*$.value,ae=K*k.value,te=(Q-I)*$.value,oe=(ee-K)*k.value;if(te<=0||oe<=0){console.warn("å¿½ç•¥æ— æ•ˆè¾¹ç•Œ:",ie,ae,te,oe);return}const de=G(i,N),f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.setAttribute("x",ie),f.setAttribute("y",ae),f.setAttribute("width",te),f.setAttribute("height",oe),f.setAttribute("fill","rgba(0, 0, 0, 0)"),f.setAttribute("stroke","rgba(220, 53, 69, 0.8)"),f.setAttribute("stroke-width","1"),f.setAttribute("stroke-dasharray","4,2"),f.setAttribute("rx","2"),f.setAttribute("ry","2"),f.setAttribute("data-node-id",de),f.setAttribute("data-depth",v),f.style.cursor="pointer",p.value.set(de,i),f.addEventListener("mouseover",q=>{f.setAttribute("fill","rgba(79, 109, 245, 0.2)"),f.setAttribute("stroke","rgba(255, 193, 7, 0.8)"),f.setAttribute("stroke-width","1.5"),me(q,i,N)}),f.addEventListener("mouseout",()=>{const q=f.getAttribute("data-node-id"),_e=p.value.get(q);c.value!==_e&&(f.setAttribute("fill","rgba(0, 0, 0, 0)"),f.setAttribute("stroke","rgba(220, 53, 69, 0.8)"),f.setAttribute("stroke-width","1"),f.setAttribute("stroke-dasharray","4,2")),$e()}),f.addEventListener("mousemove",q=>{xe(q)}),a.value.appendChild(f),e++};if($.value<=.01||k.value<=.01||$.value>10||k.value>10){console.warn(`æ£€æµ‹åˆ°ä¸åˆç†ç¼©æ”¾å› å­: X=${$.value.toFixed(3)}, Y=${k.value.toFixed(3)}ï¼Œå°†å»¶è¿Ÿé‡æ–°è®¡ç®—...`),setTimeout(()=>{m()},500);return}a.value.innerHTML="",p.value.clear();let e=0;const t=[];if(s(u.value),t.forEach(o=>{n(o)}),console.log(`èŠ‚ç‚¹æ¸²æŸ“å®Œæˆï¼Œå…±æ¸²æŸ“äº†${e}ä¸ªèŠ‚ç‚¹è¾¹ç•Œï¼ŒæŒ‰åŸå§‹JSONé¡ºåºæ¸²æŸ“`),c.value&&U(c.value),x.value){const o=a.value.getBoundingClientRect(),i=C.value.getBoundingClientRect();console.log(`SVGä½ç½®: left=${o.left}, top=${o.top}, width=${o.width}, height=${o.height}`),console.log(`å›¾ç‰‡ä½ç½®: left=${i.left}, top=${i.top}, width=${i.width}, height=${i.height}`)}}catch(e){console.error("æ¸²æŸ“èŠ‚ç‚¹æ—¶å‘ç”Ÿé”™è¯¯:",e)}}function U(e){if(!a.value)return;const t=a.value.querySelectorAll("rect");if(t.forEach(s=>{s.setAttribute("fill","rgba(0, 0, 0, 0)"),s.setAttribute("stroke","rgba(220, 53, 69, 0.8)"),s.setAttribute("stroke-width","1"),s.setAttribute("stroke-dasharray","4,2");const n=s.querySelector("animate");n&&s.removeChild(n)}),e){const s=G(e,0);for(let n=0;n<t.length;n++){const o=t[n],i=o.getAttribute("data-node-id");if(i===s||p.value.get(i)===e){o.setAttribute("fill","rgba(255, 193, 7, 0.2)"),o.setAttribute("stroke","rgba(255, 193, 7, 0.8)"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke-dasharray","4,2");const v=document.createElementNS("http://www.w3.org/2000/svg","animate");v.setAttribute("attributeName","stroke-width"),v.setAttribute("values","2;3;2"),v.setAttribute("dur","1.5s"),v.setAttribute("repeatCount","indefinite"),o.appendChild(v),x.value&&console.log("é«˜äº®èŠ‚ç‚¹:",i);break}}}}function fe(e){const t=e&&typeof e=="object"&&e.value?e.value:e;se(t).then(()=>{ne("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(s=>{console.error("å¤åˆ¶å¤±è´¥",s)})}function ge(e){T.value=!1,e&&e.bounds&&e.bounds.right-e.bounds.left>0&&e.bounds.bottom-e.bounds.top>0||O("æ‰€é€‰èŠ‚ç‚¹æ²¡æœ‰æœ‰æ•ˆçš„è¾¹ç•Œåæ ‡ï¼Œæ— æ³•åœ¨æˆªå›¾ä¸­é«˜äº®æ˜¾ç¤º"),c.value=e,U(e)}function pe(){if(!c.value){O("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹");return}try{const e=c.value;let t=`// AutoXJSèŠ‚ç‚¹æŸ¥æ‰¾ä»£ç 
`;if(e.text&&(t+=`// é€šè¿‡æ–‡æœ¬æŸ¥æ‰¾
let element = text("${e.text}").findOne();
`),e.id){let n=typeof e.id=="object"?JSON.stringify(e.id):e.id.toString();t+=`// é€šè¿‡IDæŸ¥æ‰¾
let element = id("${n}").findOne();
`,typeof e.index<"u"&&(t+=`// é€šè¿‡IDé…åˆç´¢å¼•æŸ¥æ‰¾
let element = id("${n}").indexInParent(${e.index}).findOne();
`)}const s=e.class||e.clz;if(s&&(t+=`// é€šè¿‡ç±»åæŸ¥æ‰¾
let element = className("${s}").findOne();
`,typeof e.index<"u"&&(t+=`// é€šè¿‡ç±»åé…åˆç´¢å¼•æŸ¥æ‰¾
let element = className("${s}").indexInParent(${e.index}).findOne();
`)),s&&e.text&&(t+=`// ç»„åˆæ¡ä»¶æŸ¥æ‰¾
let element = className("${s}").text("${e.text}").findOne();
`),e.bounds){const{x:n,y:o}=re(e);t+=`// é€šè¿‡åæ ‡ç‚¹å‡»
click(${n}, ${o});
`;const{left:i,top:v,right:N,bottom:I}=e.bounds;t+=`// èŠ‚ç‚¹è¾¹ç•Œä¿¡æ¯
// å·¦: ${i}, ä¸Š: ${v}, å³: ${N}, ä¸‹: ${I}
`}if(e.longClickable&&(t+=`// é•¿æŒ‰æ§ä»¶
element.longClick();
`),s&&(s.includes("EditText")||s.includes("Input"))&&(t+=`// è¾“å…¥æ–‡æœ¬
element.setText("è¦è¾“å…¥çš„æ–‡æœ¬");
`),e.desc){let n=typeof e.desc=="object"?JSON.stringify(e.desc):e.desc.toString();t+=`// é€šè¿‡æè¿°æ–‡æœ¬æŸ¥æ‰¾
let element = desc("${n}").findOne();
`,typeof e.index<"u"&&(t+=`// é€šè¿‡æè¿°é…åˆç´¢å¼•æŸ¥æ‰¾
let element = desc("${n}").indexInParent(${e.index}).findOne();
`)}D.value=t.trim()}catch(e){console.error("ç”ŸæˆAutoXJSä»£ç å‡ºé”™:",e),O("ç”Ÿæˆä»£ç å¤±è´¥ï¼Œè¯·é‡è¯•")}}function be(){if(!D.value){O("è¯·å…ˆç”Ÿæˆä»£ç ");return}se(D.value).then(()=>{ne("ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(e=>{console.error("å¤åˆ¶å¤±è´¥",e),O("å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•")})}function ye(){if(!B.value){O("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹");return}se(B.value).then(()=>{ne("èŠ‚ç‚¹JSONå·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(e=>{console.error("å¤åˆ¶å¤±è´¥",e),O("å¤åˆ¶å¤±è´¥ï¼Œè¯·é‡è¯•")})}function me(e,t,s){if(!t)return;const n=a.value.getBoundingClientRect(),o=e.clientX-n.left,i=e.clientY-n.top,v=Math.round(o/$.value),N=Math.round(i/k.value);h.value={show:!0,x:o+10,y:Math.max(5,i-5),pageX:e.clientX+10,pageY:Math.max(5,e.clientY-5),originalX:v,originalY:N,className:t.clz||t.class||"",text:t.text||"",desc:t.desc||"",index:typeof t.index<"u"?t.index:s}}function $e(){h.value.show=!1}function xe(e){if(!h.value.show)return;const t=a.value.getBoundingClientRect(),s=e.clientX-t.left,n=e.clientY-t.top,o=Math.round(s/$.value),i=Math.round(n/k.value);h.value.x=s+10,h.value.y=Math.max(5,n-5),h.value.pageX=e.clientX+10,h.value.pageY=Math.max(5,e.clientY-5),h.value.originalX=o,h.value.originalY=i}return(e,t)=>(d(),r("div",We,[ve(Ie),l("div",Ge,[l("div",Ue,[l("div",Ke,[l("div",Qe,[l("div",Ze,[t[0]||(t[0]=l("span",null,"æˆªå›¾",-1)),P.value?(d(),r("span",et,S(P.value),1)):w("",!0)]),l("div",tt,[l("div",{class:"detail-screenshot-container",ref_key:"screenshotContainer",ref:M},[l("div",ot,[g.value?(d(),r("img",{key:0,src:g.value,class:"screenshot-image",alt:"æˆªå›¾",onLoad:b,ref_key:"screenshotImage",ref:C},null,40,nt)):w("",!0),A.value&&u.value?(d(),r("svg",{key:1,id:"nodeHighlights",ref_key:"nodeHighlights",ref:a,class:"node-overlay",onClick:F},null,512)):w("",!0)]),g.value?w("",!0):(d(),r("div",st,t[1]||(t[1]=[l("span",{class:"spinner"},null,-1),E(" åŠ è½½ä¸­... ")])))],512)])])]),l("div",lt,[l("div",it,[t[6]||(t[6]=l("div",{class:"card-header tab-header"},[l("div",{class:"tabs"},[l("div",{class:"tab active"},"èŠ‚ç‚¹ä¿¡æ¯"),l("div",{class:"tab disabled",title:"TODO"},"æ‰¾è‰²æ‰¾å›¾")])],-1)),l("div",at,[u.value?c.value?(d(),r("div",ct,[l("div",ut,[t[3]||(t[3]=l("div",{class:"code-header"},[l("h6",null,"AutoXJSä»£ç ç‰‡æ®µ")],-1)),D.value?(d(),r("div",ht,[l("pre",null,S(D.value),1),l("button",{class:"copy-code-btn",onClick:be,title:"å¤åˆ¶ä»£ç "}," å¤åˆ¶ä»£ç  ")])):(d(),r("div",vt," é€‰æ‹©èŠ‚ç‚¹åå°†è‡ªåŠ¨ç”Ÿæˆä»£ç  "))]),l("div",ft,[l("h6",null,[t[4]||(t[4]=E("èŠ‚ç‚¹å±æ€§ ")),c.value.text?(d(),r("span",gt,'"'+S(c.value.text)+'"',1)):w("",!0)]),l("table",pt,[(d(!0),r(ce,null,ue(Z.value,(s,n)=>(d(),r("tr",{key:n},[l("td",bt,S(n),1),l("td",yt,[l("div",mt,[E(S(s)+" ",1),typeof s=="string"?(d(),r("button",{key:0,class:"copy-btn",onClick:o=>fe(s),title:"å¤åˆ¶"}," ğŸ“‹ ",8,$t)):w("",!0)])])]))),128))])]),l("div",xt,[l("div",{class:"json-header"},[t[5]||(t[5]=l("h6",null,"åŸå§‹JSONæ•°æ®",-1)),l("button",{class:"copy-json-btn",onClick:ye,title:"å¤åˆ¶JSON"}," ğŸ“‹ å¤åˆ¶JSON ")]),l("div",_t,[l("pre",null,S(B.value),1)])])])):(d(),r("div",rt," ç‚¹å‡»èŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ ")):(d(),r("div",dt,t[2]||(t[2]=[l("span",{class:"spinner"},null,-1),E(" åŠ è½½ä¸­... ")])))])])]),l("div",Nt,[l("div",kt,[u.value?(d(),he(qe,{key:0,"node-data":u.value,"selected-node":c.value,"auto-scroll":T.value,onNodeSelected:ge},null,8,["node-data","selected-node","auto-scroll"])):w("",!0)])])])]),h.value.show?(d(),r("div",{key:0,class:"node-hover-info",style:Te({top:h.value.pageY+"px",left:h.value.pageX+"px"})},[h.value.className?(d(),r("div",wt,[t[7]||(t[7]=l("span",{class:"info-label"},"ç±»å:",-1)),E(" "+S(h.value.className),1)])):w("",!0),h.value.text?(d(),r("div",St,[t[8]||(t[8]=l("span",{class:"info-label"},"æ–‡æœ¬:",-1)),E(" "+S(h.value.text),1)])):w("",!0),h.value.desc?(d(),r("div",At,[t[9]||(t[9]=l("span",{class:"info-label"},"æè¿°:",-1)),E(" "+S(h.value.desc),1)])):w("",!0),h.value.index!==void 0?(d(),r("div",Ct,[t[10]||(t[10]=l("span",{class:"info-label"},"ç´¢å¼•:",-1)),E(" "+S(h.value.index),1)])):w("",!0),h.value.originalX!==void 0?(d(),r("div",Tt,[t[11]||(t[11]=l("span",{class:"info-label"},"åæ ‡:",-1)),E(" "+S(h.value.originalX)+", "+S(h.value.originalY),1)])):w("",!0)],4)):w("",!0)]))}},Ht=le(It,[["__scopeId","data-v-158cd771"]]);export{Ht as default};
